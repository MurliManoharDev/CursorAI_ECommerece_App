<div class="contact-container">
  <!-- Breadcrumb Navigation -->
  <nav class="breadcrumb-nav">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a routerLink="/">Home</a>
      </li>
      <li class="breadcrumb-divider">/</li>
      <li class="breadcrumb-item">
        <a href="#">Shop</a>
      </li>
      <li class="breadcrumb-divider">/</li>
      <li class="breadcrumb-item active">Contact</li>
    </ol>
  </nav>

  <!-- Contact Section -->
  <section class="contact-section">
    <h6 class="section-subtitle">ready to work with us</h6>

    <div class="contact-content">
      <!-- Contact Form -->
      <div class="contact-form-wrapper">
        <h2 class="form-title">Contact us for all your questions and opinions</h2>

        <!-- Success/Error Messages -->
        <div class="alert alert-success" *ngIf="successMessage">
          <i class="fas fa-check-circle"></i>
          {{ successMessage }}
        </div>
        <div class="alert alert-danger" *ngIf="errorMessage">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorMessage }}
        </div>

        <!-- Contact Form -->
        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <div class="form-group">
              <label for="firstName">First Name *</label>
              <input 
                type="text" 
                id="firstName"
                class="form-control" 
                formControlName="firstName"
                [class.is-invalid]="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched">
              <div class="invalid-feedback" *ngIf="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched">
                <span *ngIf="contactForm.get('firstName')?.errors?.['required']">First name is required</span>
                <span *ngIf="contactForm.get('firstName')?.errors?.['minlength']">First name must be at least 2 characters</span>
              </div>
            </div>

            <div class="form-group">
              <label for="lastName">Last Name *</label>
              <input 
                type="text" 
                id="lastName"
                class="form-control" 
                formControlName="lastName"
                [class.is-invalid]="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched">
              <div class="invalid-feedback" *ngIf="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched">
                <span *ngIf="contactForm.get('lastName')?.errors?.['required']">Last name is required</span>
                <span *ngIf="contactForm.get('lastName')?.errors?.['minlength']">Last name must be at least 2 characters</span>
              </div>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="email">Email Address *</label>
            <input 
              type="email" 
              id="email"
              class="form-control" 
              formControlName="email"
              [class.is-invalid]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched">
            <div class="invalid-feedback" *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched">
              <span *ngIf="contactForm.get('email')?.errors?.['required']">Email is required</span>
              <span *ngIf="contactForm.get('email')?.errors?.['email']">Please enter a valid email address</span>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="phoneNumber">Phone Number (Optional)</label>
            <input 
              type="tel" 
              id="phoneNumber"
              class="form-control" 
              formControlName="phoneNumber"
              [class.is-invalid]="contactForm.get('phoneNumber')?.invalid && contactForm.get('phoneNumber')?.touched">
            <div class="invalid-feedback" *ngIf="contactForm.get('phoneNumber')?.invalid && contactForm.get('phoneNumber')?.touched">
              <span *ngIf="contactForm.get('phoneNumber')?.errors?.['pattern']">Please enter a valid phone number</span>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="country">Country / Region *</label>
            <div class="select-wrapper">
              <select 
                id="country"
                class="form-control" 
                formControlName="country"
                [class.is-invalid]="contactForm.get('country')?.invalid && contactForm.get('country')?.touched">
                <option *ngFor="let country of countries" [value]="country.code">
                  {{ country.name }}
                </option>
              </select>
              <i class="fas fa-chevron-down select-icon"></i>
            </div>
            <div class="invalid-feedback" *ngIf="contactForm.get('country')?.invalid && contactForm.get('country')?.touched">
              <span *ngIf="contactForm.get('country')?.errors?.['required']">Country is required</span>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="subject">Subject (Optional)</label>
            <input 
              type="text" 
              id="subject"
              class="form-control" 
              formControlName="subject">
          </div>

          <div class="form-group full-width">
            <label for="message">Message</label>
            <textarea 
              id="message"
              class="form-control" 
              rows="5"
              placeholder="Note about your order, e.g. special note for delivery"
              formControlName="message"
              [class.is-invalid]="contactForm.get('message')?.invalid && contactForm.get('message')?.touched">
            </textarea>
            <div class="invalid-feedback" *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched">
              <span *ngIf="contactForm.get('message')?.errors?.['required']">Message is required</span>
              <span *ngIf="contactForm.get('message')?.errors?.['minlength']">Message must be at least 10 characters</span>
            </div>
          </div>

          <div class="form-group checkbox-group">
            <input 
              type="checkbox" 
              id="newsletter" 
              [checked]="newsletterConsent"
              (change)="toggleNewsletterConsent()">
            <label for="newsletter">
              I want to receive news and updates once in a while. By submitting, I'm agreed to the 
              <a href="#" class="terms-link">Terms & Conditions</a>
            </label>
          </div>

          <button type="submit" class="btn-submit" [disabled]="isLoading">
            <span *ngIf="!isLoading">send message</span>
            <span *ngIf="isLoading">
              <i class="fas fa-spinner fa-spin"></i> Sending...
            </span>
          </button>
        </form>
      </div>

      <!-- Contact Info Card -->
      <div class="contact-info-wrapper">
        <div class="contact-info-card">
          <!-- US Office -->
          <div class="office-info">
            <h6 class="office-title">{{ contactInfo.us.title }}</h6>
            <address class="office-details">
              {{ contactInfo.us.address }}<br>
              {{ contactInfo.us.phone }}<br>
              {{ contactInfo.us.email }}
            </address>
          </div>

          <!-- UK Office -->
          <div class="office-info">
            <h6 class="office-title">{{ contactInfo.uk.title }}</h6>
            <address class="office-details">
              {{ contactInfo.uk.address }}<br>
              {{ contactInfo.uk.phone }}<br>
              {{ contactInfo.uk.email }}
            </address>
          </div>

          <!-- Social Links -->
          <div class="social-links">
            <a 
              *ngFor="let social of socialLinks" 
              [href]="social.url" 
              target="_blank"
              rel="noopener noreferrer"
              class="social-link"
              [attr.aria-label]="social.label">
              <i [class]="social.icon"></i>
            </a>
          </div>
        </div>

        <!-- Contact Image -->
        <div class="contact-image">
          <img src="https://images.unsplash.com/photo-1596524430615-b46475ddff6e?w=500&h=380&fit=crop" alt="Contact Us">
        </div>
      </div>
    </div>
  </section>

  <!-- Google Maps Section -->
  <section class="map-section">
    <h6 class="section-subtitle">find us on google map</h6>
    <div class="map-container">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.1841902123697!2d-73.99440268459387!3d40.75797697932681!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259a9b3117469%3A0xd134e199a405a163!2sEmpire%20State%20Building!5e0!3m2!1sen!2sus!4v1635959040139!5m2!1sen!2sus"
        width="100%" 
        height="300" 
        style="border:0;" 
        allowfullscreen="" 
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </section>
</div>
